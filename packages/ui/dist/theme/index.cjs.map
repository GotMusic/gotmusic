{"version":3,"sources":["../../src/theme/index.ts","../../src/theme/Provider.tsx"],"sourcesContent":["export { ThemeProvider, useTheme, type Theme } from \"./Provider\";\n","\"use client\";\n\nimport { createContext, useEffect, useState } from \"react\";\n\nexport type Theme = \"dark\" | \"light\" | \"high-contrast\";\n\ninterface ThemeContextValue {\n  theme: Theme;\n  setTheme: (theme: Theme) => void;\n  systemTheme: Theme;\n}\n\nconst ThemeContext = createContext<ThemeContextValue | undefined>(undefined);\n\nconst STORAGE_KEY = \"gotmusic-theme\";\n\nfunction getSystemTheme(): Theme {\n  if (typeof window === \"undefined\") return \"dark\";\n\n  const darkQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n  const contrastQuery = window.matchMedia(\"(prefers-contrast: more)\");\n\n  if (contrastQuery.matches) return \"high-contrast\";\n  return darkQuery.matches ? \"dark\" : \"light\";\n}\n\nfunction getStoredTheme(): Theme | null {\n  if (typeof window === \"undefined\") return null;\n\n  try {\n    const stored = localStorage.getItem(STORAGE_KEY);\n    if (stored === \"dark\" || stored === \"light\" || stored === \"high-contrast\") {\n      return stored;\n    }\n  } catch {\n    // localStorage access might be blocked\n  }\n\n  return null;\n}\n\nfunction storeTheme(theme: Theme): void {\n  try {\n    localStorage.setItem(STORAGE_KEY, theme);\n  } catch {\n    // localStorage access might be blocked\n  }\n}\n\ninterface ThemeProviderProps {\n  children: React.ReactNode;\n  defaultTheme?: Theme;\n  storageKey?: string;\n}\n\nexport function ThemeProvider({ children, defaultTheme = \"dark\" }: ThemeProviderProps) {\n  const [systemTheme, setSystemTheme] = useState<Theme>(() => getSystemTheme());\n  const [theme, setThemeState] = useState<Theme>(() => {\n    const stored = getStoredTheme();\n    return stored ?? defaultTheme;\n  });\n\n  // Listen for system theme changes\n  useEffect(() => {\n    const darkQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n    const contrastQuery = window.matchMedia(\"(prefers-contrast: more)\");\n\n    const handleChange = () => {\n      const newSystemTheme = getSystemTheme();\n      setSystemTheme(newSystemTheme);\n    };\n\n    darkQuery.addEventListener(\"change\", handleChange);\n    contrastQuery.addEventListener(\"change\", handleChange);\n\n    return () => {\n      darkQuery.removeEventListener(\"change\", handleChange);\n      contrastQuery.removeEventListener(\"change\", handleChange);\n    };\n  }, []);\n\n  // Apply theme to document\n  useEffect(() => {\n    const root = window.document.documentElement;\n\n    root.classList.remove(\"dark\", \"light\", \"high-contrast\");\n    root.classList.add(theme);\n\n    // Set data attribute for CSS\n    root.setAttribute(\"data-theme\", theme);\n  }, [theme]);\n\n  const setTheme = (newTheme: Theme) => {\n    setThemeState(newTheme);\n    storeTheme(newTheme);\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme, systemTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = React.useContext(ThemeContext);\n\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\");\n  }\n\n  return context;\n}\n\n// Re-export React for the hook\nimport * as React from \"react\";\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACEA,mBAAmD;AAiHnD,YAAuB;AAjBnB;AAtFJ,IAAM,mBAAe,4BAA6C,MAAS;AAE3E,IAAM,cAAc;AAEpB,SAAS,iBAAwB;AAC/B,MAAI,OAAO,WAAW,YAAa,QAAO;AAE1C,QAAM,YAAY,OAAO,WAAW,8BAA8B;AAClE,QAAM,gBAAgB,OAAO,WAAW,0BAA0B;AAElE,MAAI,cAAc,QAAS,QAAO;AAClC,SAAO,UAAU,UAAU,SAAS;AACtC;AAEA,SAAS,iBAA+B;AACtC,MAAI,OAAO,WAAW,YAAa,QAAO;AAE1C,MAAI;AACF,UAAM,SAAS,aAAa,QAAQ,WAAW;AAC/C,QAAI,WAAW,UAAU,WAAW,WAAW,WAAW,iBAAiB;AACzE,aAAO;AAAA,IACT;AAAA,EACF,QAAQ;AAAA,EAER;AAEA,SAAO;AACT;AAEA,SAAS,WAAW,OAAoB;AACtC,MAAI;AACF,iBAAa,QAAQ,aAAa,KAAK;AAAA,EACzC,QAAQ;AAAA,EAER;AACF;AAQO,SAAS,cAAc,EAAE,UAAU,eAAe,OAAO,GAAuB;AACrF,QAAM,CAAC,aAAa,cAAc,QAAI,uBAAgB,MAAM,eAAe,CAAC;AAC5E,QAAM,CAAC,OAAO,aAAa,QAAI,uBAAgB,MAAM;AACnD,UAAM,SAAS,eAAe;AAC9B,WAAO,UAAU;AAAA,EACnB,CAAC;AAGD,8BAAU,MAAM;AACd,UAAM,YAAY,OAAO,WAAW,8BAA8B;AAClE,UAAM,gBAAgB,OAAO,WAAW,0BAA0B;AAElE,UAAM,eAAe,MAAM;AACzB,YAAM,iBAAiB,eAAe;AACtC,qBAAe,cAAc;AAAA,IAC/B;AAEA,cAAU,iBAAiB,UAAU,YAAY;AACjD,kBAAc,iBAAiB,UAAU,YAAY;AAErD,WAAO,MAAM;AACX,gBAAU,oBAAoB,UAAU,YAAY;AACpD,oBAAc,oBAAoB,UAAU,YAAY;AAAA,IAC1D;AAAA,EACF,GAAG,CAAC,CAAC;AAGL,8BAAU,MAAM;AACd,UAAM,OAAO,OAAO,SAAS;AAE7B,SAAK,UAAU,OAAO,QAAQ,SAAS,eAAe;AACtD,SAAK,UAAU,IAAI,KAAK;AAGxB,SAAK,aAAa,cAAc,KAAK;AAAA,EACvC,GAAG,CAAC,KAAK,CAAC;AAEV,QAAM,WAAW,CAAC,aAAoB;AACpC,kBAAc,QAAQ;AACtB,eAAW,QAAQ;AAAA,EACrB;AAEA,SACE,4CAAC,aAAa,UAAb,EAAsB,OAAO,EAAE,OAAO,UAAU,YAAY,GAC1D,UACH;AAEJ;AAEO,SAAS,WAAW;AACzB,QAAM,UAAgB,iBAAW,YAAY;AAE7C,MAAI,YAAY,QAAW;AACzB,UAAM,IAAI,MAAM,8CAA8C;AAAA,EAChE;AAEA,SAAO;AACT;","names":[]}