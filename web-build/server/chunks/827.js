"use strict";exports.id=827,exports.ids=[827],exports.modules={19775:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"notFound",{enumerable:!0,get:function(){return e}});let d=""+c(27178).HTTP_ERROR_FALLBACK_ERROR_CODE+";404";function e(){let a=Object.defineProperty(Error(d),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});throw a.digest=d,a}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},22134:(a,b,c)=>{var d=c(99142);c.o(d,"notFound")&&c.d(b,{notFound:function(){return d.notFound}}),c.o(d,"redirect")&&c.d(b,{redirect:function(){return d.redirect}})},23924:(a,b,c)=>{c.r(b),c.d(b,{assetAudit:()=>C,assetAuditPg:()=>u,assetAuditRelations:()=>G,assetAuditRelationsPg:()=>y,assetFileKindEnum:()=>p,assetFileRelations:()=>F,assetFileRelationsPg:()=>x,assetFiles:()=>B,assetFilesPg:()=>t,assetRelations:()=>E,assetRelationsPg:()=>w,assetStatusEnum:()=>o,assets:()=>A,assetsPg:()=>s,auditOperationEnum:()=>q,uploadJobRelations:()=>H,uploadJobRelationsPg:()=>z,uploadJobStageEnum:()=>r,uploadJobs:()=>D,uploadJobsPg:()=>v});var d=c(89956),e=c(77988),f=c(92570),g=c(34107),h=c(7268),i=c(51453),j=c(25880),k=c(72099),l=c(34527),m=c(88674),n=c(45254);let o=(0,f.rL)("asset_status",["draft","published","archived","processing","ready","error"]),p=(0,f.rL)("asset_file_kind",["original","preview","artwork","waveform"]),q=(0,f.rL)("audit_operation",["create","update","delete","status_change"]),r=(0,f.rL)("upload_job_stage",["init","uploading","encrypting","done","error"]),s=(0,g.cJ)("assets",{id:(0,h.Qq)("id").primaryKey(),title:(0,h.Qq)("title").notNull(),artist:(0,h.Qq)("artist").notNull(),bpm:(0,i.nd)("bpm"),keySig:(0,h.Qq)("key_sig"),durationSec:(0,i.nd)("duration_sec"),priceAmount:(0,j.sH)("price_amount",{precision:10,scale:2}).notNull(),priceCurrency:(0,h.Qq)("price_currency").notNull(),priceCredits:(0,i.nd)("price_credits").default(10),status:o("status").notNull().default("draft"),fileCid:(0,h.Qq)("file_cid"),storageKey:(0,h.Qq)("storage_key"),ownerId:(0,h.Qq)("owner_id"),updatedAt:(0,k.vE)("updated_at").notNull().defaultNow().$onUpdate(()=>new Date),createdAt:(0,k.vE)("created_at").notNull().defaultNow()},a=>({statusIdx:(0,l.Pe)("assets_status_idx").on(a.status),updatedAtIdx:(0,l.Pe)("assets_updated_at_idx").on(a.updatedAt),artistIdx:(0,l.Pe)("assets_artist_idx").on(a.artist),priceAmountCheck:(0,m.z6)("price_amount_positive",(0,d.ll)`${a.priceAmount} >= 0`)})),t=(0,g.cJ)("asset_files",{id:(0,h.Qq)("id").primaryKey(),assetId:(0,h.Qq)("asset_id").notNull(),kind:p("kind").notNull(),storageKey:(0,h.Qq)("storage_key").notNull(),bytes:(0,i.nd)("bytes"),mime:(0,h.Qq)("mime"),checksum:(0,h.Qq)("checksum"),createdAt:(0,k.vE)("created_at").notNull().defaultNow()},a=>({assetKindUnique:(0,n.Am)("asset_files_asset_id_kind_unique").on(a.assetId,a.kind),assetIdIdx:(0,l.Pe)("asset_files_asset_id_idx").on(a.assetId),kindIdx:(0,l.Pe)("asset_files_kind_idx").on(a.kind)})),u=(0,g.cJ)("asset_audit",{id:(0,h.Qq)("id").primaryKey(),assetId:(0,h.Qq)("asset_id").notNull(),operation:q("operation").notNull(),userId:(0,h.Qq)("user_id"),before:(0,h.Qq)("before"),after:(0,h.Qq)("after"),changedFields:(0,h.Qq)("changed_fields"),createdAt:(0,k.vE)("created_at").notNull().defaultNow()},a=>({assetIdIdx:(0,l.Pe)("asset_audit_asset_id_idx").on(a.assetId),operationIdx:(0,l.Pe)("asset_audit_operation_idx").on(a.operation),createdAtIdx:(0,l.Pe)("asset_audit_created_at_idx").on(a.createdAt)})),v=(0,g.cJ)("upload_jobs",{id:(0,h.Qq)("id").primaryKey(),userId:(0,h.Qq)("user_id").notNull(),assetId:(0,h.Qq)("asset_id").notNull(),stage:r("stage").notNull().default("init"),message:(0,h.Qq)("message"),createdAt:(0,k.vE)("created_at").notNull().defaultNow()},a=>({userIdIdx:(0,l.Pe)("upload_jobs_user_id_idx").on(a.userId),assetIdIdx:(0,l.Pe)("upload_jobs_asset_id_idx").on(a.assetId),stageIdx:(0,l.Pe)("upload_jobs_stage_idx").on(a.stage)})),w=(0,e.K1)(s,({many:a})=>({files:a(t),auditLogs:a(u),uploadJobs:a(v)})),x=(0,e.K1)(t,({one:a})=>({asset:a(s,{fields:[t.assetId],references:[s.id]})})),y=(0,e.K1)(u,({one:a})=>({asset:a(s,{fields:[u.assetId],references:[s.id]})})),z=(0,e.K1)(v,({one:a})=>({asset:a(s,{fields:[v.assetId],references:[s.id]})})),A=s,B=t,C=u,D=v,E=w,F=x,G=y,H=z},28216:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return function a(b){if((0,g.isNextRouterError)(b)||(0,f.isBailoutToCSRError)(b)||(0,i.isDynamicServerError)(b)||(0,h.isDynamicPostpone)(b)||(0,e.isPostpone)(b)||(0,d.isHangingPromiseRejectionError)(b))throw b;b instanceof Error&&"cause"in b&&a(b.cause)}}});let d=c(86586),e=c(18983),f=c(948),g=c(63352),h=c(51513),i=c(95181);("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},28999:(a,b,c)=>{c.d(b,{default:()=>i});var d=c(78157);let e=process.env.NEXT_PUBLIC_BLOCKSCOUT_URL||"https://base-sepolia.blockscout.com";function f({hash:a,type:b,children:c,showFullHash:f=!1,className:g=""}){if(!a)return null;let h="tx"===b?function(a){if(!a)return"";let b=a.startsWith("0x")?a:`0x${a}`;return`${e}/tx/${b}`}(a):function(a){if(!a)return"";let b=a.startsWith("0x")?a:`0x${a}`;return`${e}/search?q=${b}`}(a),i=c||(f?a:function(a,b=4,c=4){if(!a)return"";if(a.length<=b+c+2)return a;let d=a.slice(0,2+b),e=a.slice(-c);return`${d}...${e}`}(a));return(0,d.jsxs)("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:`inline-flex items-center gap-1 text-brand-500 hover:text-brand-600 hover:underline ${g}`,"data-testid":`blockscout-link-${b}`,children:[i,(0,d.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),(0,d.jsx)("span",{className:"sr-only",children:"(opens in new tab)"})]})}function g({txHash:a,children:b,...c}){return(0,d.jsx)(f,{hash:a,type:"tx",...c,children:b||"View Transaction"})}function h({uid:a,children:b,...c}){return(0,d.jsx)(f,{hash:a,type:"attestation",...c,children:b||"View Attestation"})}function i({assetId:a}){let b="true"===process.env.NEXT_PUBLIC_SHOW_MOCK_RECEIPT;return b?(0,d.jsxs)("div",{className:"rounded-md border border-fg/10 bg-bg p-4","data-testid":"asset-receipt",children:[(0,d.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-sm font-semibold",children:"License Receipt"}),b&&(0,d.jsx)("span",{className:"rounded bg-brand-500/10 px-2 py-0.5 text-xs text-brand-500","data-testid":"mock-badge",children:"Mock Data"})]}),(0,d.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"mb-1 text-fg/70",children:"Transaction"}),(0,d.jsx)("dd",{className:"font-mono text-xs","data-testid":"receipt-tx",children:(0,d.jsx)(g,{txHash:"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef"})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("dt",{className:"mb-1 text-fg/70",children:"Attestation (EAS)"}),(0,d.jsx)("dd",{className:"font-mono text-xs","data-testid":"receipt-attestation",children:(0,d.jsx)(h,{uid:"0xabcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"})})]}),(0,d.jsx)("div",{className:"mt-4 rounded bg-fg/5 p-3 text-xs text-fg/70",children:(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"Note:"})," License receipts are immutable attestations stored on Base Sepolia via Ethereum Attestation Service (EAS). Click the links above to verify on Blockscout."]})})]})]}):null}},39589:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{db:()=>j});var e=c(94560),f=c(64939),g=c(23924),h=a([f,e]);[f,e]=h.then?(await h)():h;let i=null,j=new Proxy({},{get:(a,b)=>(!i&&(i=function(){let a=process.env.DATABASE_URL;if(!a)throw Error("DATABASE_URL environment variable is required for Postgres");let b=new f.Pool({connectionString:a,ssl:!process.env.CI&&!process.env.E2E_AUTH_BYPASS&&{rejectUnauthorized:!1}});return(0,e.fd)(b,{schema:g})}()),i)[b]});d()}catch(a){d(a)}})},40098:(a,b,c)=>{c.d(b,{default:()=>d});let d=(0,c(25459).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/runner/work/gotmusic/gotmusic/apps/web/src/app/admin/assets/[id]/AssetReceipt.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/runner/work/gotmusic/gotmusic/apps/web/src/app/admin/assets/[id]/AssetReceipt.tsx","default")},41423:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{getRedirectError:function(){return g},getRedirectStatusCodeFromError:function(){return l},getRedirectTypeFromError:function(){return k},getURLFromRedirectError:function(){return j},permanentRedirect:function(){return i},redirect:function(){return h}});let d=c(39818),e=c(24584),f=c(19121).actionAsyncStorage;function g(a,b,c){void 0===c&&(c=d.RedirectStatusCode.TemporaryRedirect);let f=Object.defineProperty(Error(e.REDIRECT_ERROR_CODE),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return f.digest=e.REDIRECT_ERROR_CODE+";"+b+";"+a+";"+c+";",f}function h(a,b){var c;throw null!=b||(b=(null==f||null==(c=f.getStore())?void 0:c.isAction)?e.RedirectType.push:e.RedirectType.replace),g(a,b,d.RedirectStatusCode.TemporaryRedirect)}function i(a,b){throw void 0===b&&(b=e.RedirectType.replace),g(a,b,d.RedirectStatusCode.PermanentRedirect)}function j(a){return(0,e.isRedirectError)(a)?a.digest.split(";").slice(2,-2).join(";"):null}function k(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return a.digest.split(";",2)[1]}function l(a){if(!(0,e.isRedirectError)(a))throw Object.defineProperty(Error("Not a redirect error"),"__NEXT_ERROR_CODE",{value:"E260",enumerable:!1,configurable:!0});return Number(a.digest.split(";").at(-2))}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},54234:(a,b,c)=>{function d(){throw Object.defineProperty(Error("`forbidden()` is experimental and only allowed to be enabled when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E488",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"forbidden",{enumerable:!0,get:function(){return d}}),c(27178).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},83457:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unstable_rethrow",{enumerable:!0,get:function(){return d}});let d=c(28216).unstable_rethrow;("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},84139:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{db:()=>e.db,w:()=>f});var e=c(39589),f=c(23924),g=a([e]);e=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},95941:(a,b,c)=>{function d(){throw Object.defineProperty(Error("`unauthorized()` is experimental and only allowed to be used when `experimental.authInterrupts` is enabled."),"__NEXT_ERROR_CODE",{value:"E411",enumerable:!1,configurable:!0})}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"unauthorized",{enumerable:!0,get:function(){return d}}),c(27178).HTTP_ERROR_FALLBACK_ERROR_CODE,("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},99142:(a,b,c)=>{Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{ReadonlyURLSearchParams:function(){return k},RedirectType:function(){return e.RedirectType},forbidden:function(){return g.forbidden},notFound:function(){return f.notFound},permanentRedirect:function(){return d.permanentRedirect},redirect:function(){return d.redirect},unauthorized:function(){return h.unauthorized},unstable_isUnrecognizedActionError:function(){return l},unstable_rethrow:function(){return i.unstable_rethrow}});let d=c(41423),e=c(24584),f=c(19775),g=c(54234),h=c(95941),i=c(83457);class j extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class k extends URLSearchParams{append(){throw new j}delete(){throw new j}set(){throw new j}sort(){throw new j}}function l(){throw Object.defineProperty(Error("`unstable_isUnrecognizedActionError` can only be used on the client."),"__NEXT_ERROR_CODE",{value:"E776",enumerable:!1,configurable:!0})}("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)}};